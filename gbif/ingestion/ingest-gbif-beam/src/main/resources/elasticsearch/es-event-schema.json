{
  "_source": {
    "excludes": [
      "derivedMetadata.taxonomicCoverage",
      "all"
    ]
  },
  "dynamic_templates": [
    {
      "verbatim": {
        "path_match": "verbatim.*",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "humboldt_usage_key": {
        "path_match": "event.humboldt.*.*.*.key",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "humboldt_usage_name": {
        "path_match": "event.humboldt.*.*.*.name",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "humboldt_usage_rank": {
        "path_match": "event.humboldt.*.*.*.rank",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "humboldt_classification_rank": {
        "path_match": "event.humboldt.*.*.classification.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "humboldt_classification": {
        "path_match": "event.humboldt.*.*.classification.*.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "humboldt_classification_keys_rank": {
        "path_match": "event.humboldt.*.*.classificationKeys.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "humboldt_classification_keys": {
        "path_match": "event.humboldt.*.*.classificationKeys.*.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "humboldt_classification_taxon_keys": {
        "path_match": "event.humboldt.*.*.taxonKeys",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "humboldt_classification_issues": {
        "path_match": "event.humboldt.*.*.issues",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "humboldt__iucnRedListCategoryCode": {
        "path_match": "event.humboldt.*.*.iucnRedListCategoryCode",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_usage_key": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.*.key",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_usage_name": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.*.name",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_usage_rank": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.*.rank",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "derived_taxon_classification_rank": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.classification.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "derived_taxon_classification": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.classification.*.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "derived_taxon_classification_keys_rank": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.classificationKeys.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "derived_taxon_classification_keys": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.classificationKeys.*.*",
        "mapping": {
          "type": "keyword",
          "index": false, "doc_values": false
        }
      }
    },
    {
      "derived_taxon_classification_taxon_keys": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.taxonKeys",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_classification_issues": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.issues",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_iucnRedListCategoryCode": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.iucnRedListCategoryCode",
        "mapping": {
          "type": "keyword"
        }
      }
    },
    {
      "derived_taxon_status": {
        "path_match": "derivedMetadata.taxonomicCoverage.classifications.*.status",
        "mapping": {
          "type": "keyword"
        }
      }
    }
  ],
  "properties": {

    "all": {"type": "text", "index": true, "store":false},

    "id": {"type": "keyword", "normalizer": "lowercase_normalizer"},
    "type": {"type": "keyword", "normalizer": "lowercase_normalizer"},
    "crawlId": {"type": "integer"},
    "internalId": {"type": "keyword"},
    "lastCrawled": {"type": "date"},
    "created": {"type": "date"},
    "uniqueKey": {"type": "keyword"},
    "firstLoaded": {"type": "date"},

    "metadata": {
      "type": "object",
      "properties": {
        "datasetKey": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "datasetTitle": {"type": "keyword", "normalizer": "lowercase_normalizer", "copy_to": "all"},
        "installationKey": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "hostingOrganizationKey": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "endorsingNodeKey": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "publisherTitle": {"type": "keyword", "normalizer": "lowercase_normalizer", "copy_to": "all"},
        "license": {"type": "keyword", "copy_to": "all"},
        "protocol": {"type": "keyword", "copy_to": "all"},
        "publishingCountry": {"type": "keyword", "copy_to": "all"},
        "datasetPublishingCountry": {"type": "keyword", "copy_to": "all"},
        "publishingOrganizationKey": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "networkKeys": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "projectId": {"type": "keyword", "normalizer": "lowercase_normalizer", "copy_to": "all"},
        "projectIdJoined": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "programmeAcronym": {"type": "keyword", "normalizer": "lowercase_normalizer", "copy_to": "all"}
      }
    },

    "derivedMetadata": {
      "type": "object",
      "properties": {
        "wktConvexHull": {
          "type": "geo_shape"
        },
        "temporalCoverage": {
          "type": "date_range", "format": "yyyy-MM-dd'T'HH:mm:ss.SSSXXX||yyyy-MM-dd'T'HH:mm:ssXXX||yyyy-MM-dd'T'HH:mmXXX||yyyy-MM-dd'T'HH:mm:ss.SSS||yyyy-MM-dd'T'HH:mm:ss.SS||yyyy-MM-dd'T'HH:mm:ss.S||yyyy-MM-dd'T'HH:mm:ss||yyyy-MM-dd'T'HH:mm||yyyy-MM-dd||yyyy-MM||yyyy"
        },
        "taxonomicCoverage": {
          "type": "object",
          "properties": {
            "taxonIDs": {"type": "keyword", "boost": 100.0, "copy_to": "all", "normalizer": "lowercase_normalizer"}
          }
          }
        }
    },

    "event": {
      "type": "object",
      "properties": {
        "yearMonthEventIDSort": {"type":  "keyword"},
        "references": {"type":"keyword", "index": false, "doc_values": false},
        "samplingProtocolJoined": {"type": "keyword", "normalizer": "lowercase_normalizer"},
        "samplingProtocol": {
          "type": "keyword", "ignore_above": 1024, "normalizer": "lowercase_normalizer",
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "eventID": {
          "type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "parentEventID": {
          "type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "parentsLineage": {
          "type": "object",
          "properties": {
            "id": {"type": "keyword"},
            "eventType": {"type": "keyword"}
          }
        },
        "eventType": {
          "properties": {
            "concept": {"type": "keyword"},
            "lineage": {"type": "keyword", "copy_to": "all"}
          }
        },
        "verbatimEventType": { "type": "keyword" },
        "eventHierarchy": {
          "type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "eventHierarchyJoined": {"type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024},
        "eventTypeHierarchy": {
          "type": "keyword",  "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "eventTypeHierarchyJoined": {"type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024},
        "verbatimEventTypeHierarchy": {
          "type": "keyword",  "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "verbatimEventTypeHierarchyJoined": {"type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024},
        "institutionCode":  {
          "type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "collectionCode":  {
          "type": "keyword", "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "locality":  {
          "type": "keyword",  "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "datasetID": {"type": "keyword", "normalizer": "lowercase_normalizer", "copy_to": "all"},
        "datasetName": {"type": "keyword", "copy_to": "all"},

        "sampleSizeUnit": {"type": "keyword", "copy_to": "all"},
        "sampleSizeValue": {"type": "double"},

        "continent": {"type":"keyword", "copy_to": "all"},
        "waterBody": {
          "type": "keyword",  "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "countryCode": {"type":"keyword", "copy_to": "all"},
        "country": {"type":"keyword", "copy_to": "all", "index": false, "doc_values": false},
        "stateProvince": {
          "type": "keyword",  "normalizer": "lowercase_normalizer", "ignore_above": 1024,
          "fields": {
            "suggest": {"type": "completion", "analyzer": "lowercase_analyzer", "preserve_separators": true, "preserve_position_increments": true, "max_input_length": 50},
            "verbatim": {"type": "keyword", "ignore_above": 1024}
          }
        },
        "minimumElevationInMeters": {"type": "double"},
        "maximumElevationInMeters": {"type": "double"},
        "minimumDepthInMeters": {"type": "double"},
        "maximumDepthInMeters": {"type": "double"},
        "minimumDistanceAboveSurfaceInMeters": {"type": "double"},
        "maximumDistanceAboveSurfaceInMeters": {"type": "double"},
        "coordinateUncertaintyInMeters": {"type": "double"},
        "coordinatePrecision": {"type": "double"},
        "coordinates": {"type": "geo_point"},
        "scoordinates": {"type": "geo_shape"},
        "decimalLatitude": {"type": "double"},
        "decimalLongitude": {"type": "double"},
        "verbatimElevation": {"type": "keyword"},
        "verbatimDepth": {"type": "keyword"},
        "hasCoordinate": {"type": "boolean"},
        "repatriated": {"type": "boolean"},
        "hasGeospatialIssue": {"type": "boolean"},
        "footprintWKT":  {"type": "keyword", "index": false, "doc_values": false},
        "gadm": {
          "type": "object",
          "properties": {
            "gids": {"type": "keyword"},
            "level0Gid": {"type": "keyword"},
            "level1Gid": {"type": "keyword"},
            "level2Gid": {"type": "keyword"},
            "level3Gid": {"type": "keyword"},
            "level0Name": {"type": "keyword", "copy_to": "all"},
            "level1Name": {"type": "keyword", "copy_to": "all"},
            "level2Name": {"type": "keyword", "copy_to": "all"},
            "level3Name": {"type": "keyword", "copy_to": "all"}
          }
        },

        "year": {"type": "short"},
        "month": {"type": "short"},
        "day": {"type": "short"},
        "eventDate": {"type": "date_range", "format": "yyyy-MM-dd'T'HH:mm:ss.SSSXXX||yyyy-MM-dd'T'HH:mm:ssXXX||yyyy-MM-dd'T'HH:mmXXX||yyyy-MM-dd'T'HH:mm:ss.SSS||yyyy-MM-dd'T'HH:mm:ss.SS||yyyy-MM-dd'T'HH:mm:ss.S||yyyy-MM-dd'T'HH:mm:ss||yyyy-MM-dd'T'HH:mm||yyyy-MM-dd||yyyy-MM||yyyy"},
        "eventDateInterval": {"type": "keyword"},
        "eventDateSingle": {"type": "date"},
        "startDayOfYear": {"type": "short"},
        "endDayOfYear": {"type": "short"},
        "modified": {"type": "date"},

        "fieldNumber": {"type": "keyword", "copy_to": "all"},

        "issues": {"type": "keyword"},
        "notIssues": {"type": "keyword"},
        "extensions": {"type": "keyword"},

        "mediaTypes": {"type": "keyword", "copy_to": "all"},
        "mediaLicenses": {"type": "keyword", "copy_to": "all"},
        "multimediaItems": {"type": "nested", "enabled": false,
          "properties": {
            "license": {"type": "keyword"}
          }
        },

        "humboldt": {
          "type": "nested",
          "properties": {
            "siteCount": {"type": "integer"},
            "verbatimSiteNames": {"type": "keyword"},
            "verbatimSiteDescriptions": {"type": "text", "index":  false, "doc_values": false},
            "geospatialScopeAreaValue": {"type": "double"},
            "geospatialScopeAreaUnit": {"type": "keyword"},
            "totalAreaSampledValue": {"type": "double"},
            "totalAreaSampledUnit": {"type": "keyword"},
            "targetHabitatScope": {"type": "keyword"},
            "excludedHabitatScope": {"type": "keyword"},
            "eventDurationValueInMinutes": {"type": "double"},
            "eventDurationValue": {"type": "double"},
            "eventDurationUnit": {"type": "keyword"},
            "taxonCompletenessProtocols": {"type": "keyword"},
            "isTaxonomicScopeFullyReported": {"type": "boolean"},
            "isAbsenceReported": {"type": "boolean"},
            "hasNonTargetTaxa": {"type": "boolean"},
            "areNonTargetTaxaFullyReported": {"type": "boolean"},
            "targetLifeStageScope": {
              "type": "object",
              "properties": {
                "concept": {
                  "type": "keyword"
                },
                "lineage": {
                  "type": "keyword"
                }
              }
            },
            "excludedLifeStageScope": {
              "type": "object",
              "properties": {
                "concept": {
                  "type": "keyword"
                },
                "lineage": {
                  "type": "keyword"
                }
              }
            },
            "isLifeStageScopeFullyReported": {"type": "boolean"},
            "targetDegreeOfEstablishmentScope": {
              "type": "object",
              "properties": {
                "concept": {
                  "type": "keyword"
                },
                "lineage": {
                  "type": "keyword"
                }
              }
            },
            "excludedDegreeOfEstablishmentScope": {
              "type": "object",
              "properties": {
                "concept": {
                  "type": "keyword"
                },
                "lineage": {
                  "type": "keyword"
                }
              }
            },
            "isDegreeOfEstablishmentScopeFullyReported": {"type": "boolean"},
            "targetGrowthFormScope": {"type": "keyword"},
            "excludedGrowthFormScope": {"type": "keyword"},
            "isGrowthFormScopeFullyReported": {"type": "boolean"},
            "hasNonTargetOrganisms": {"type": "boolean"},
            "compilationTypes": {"type": "keyword"},
            "compilationSourceTypes": {"type": "keyword"},
            "inventoryTypes": {"type": "keyword"},
            "protocolNames": {"type": "keyword"},
            "protocolDescriptions": {"type": "text", "index":  false, "doc_values": false},
            "protocolReferences": {"type": "text", "index":  false, "doc_values": false},
            "isAbundanceReported": {"type": "boolean"},
            "isAbundanceCapReported": {"type": "boolean"},
            "abundanceCap": {"type": "integer"},
            "isVegetationCoverReported": {"type": "boolean"},
            "isLeastSpecificTargetCategoryQuantityInclusive": {"type": "boolean"},
            "hasVouchers": {"type": "boolean"},
            "voucherInstitutions": {"type": "keyword"},
            "hasMaterialSamples": {"type": "boolean"},
            "materialSampleTypes": {"type": "keyword"},
            "samplingPerformedBy": {"type": "keyword"},
            "isSamplingEffortReported": {"type": "boolean"},
            "samplingEffortValue": {"type": "double"},
            "samplingEffortUnit": {"type": "keyword"}
          }
        }
      }
    },

    "verbatim": {"type": "object", "enabled": false}
  }
}
